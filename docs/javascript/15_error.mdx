---
sidebar_position: 15
title: '15. 程式出錯啦'
---
import Playground  from '../../src/components/playground'
import Quiz  from '../../src/components/quiz'

# 程式出錯啦
程式是一種和電腦溝通的語言，如果電腦聽不懂你所說的指令，它就無法按照你所預期的去執行。<br/>
但電腦仍會試著告訴你它看不懂的地方，這就是錯誤訊息。

## 三種程式錯誤
程式錯誤主要分成三種類型：<br/>

|類型|出現情況|
|-|-|
|**語法錯誤**|表示電腦看不懂你所要表達的，它就無法按照你的指示去執行，<br/>通常會發生的情況是，你沒有按照語法規則去設計程式。<br/>例如：少加一個括號或是語法單詞拼錯，就會導致語法錯誤。
|**執行錯誤**|電腦可以正確解讀你要它執行的事情，但當電腦真正去執行時到一半，<br/>發現錯誤導致無法再執行下去。<br/>例如：變數名稱打錯、或執行不存在的函式、字串和數值型態相加等。
|**邏輯錯誤**|當語法沒有錯誤而且執行時也沒有錯誤，但最後執行的結果和預期的不一樣。<br/>這就不是電腦或程式的問題，而是程式設計本身的漏洞。<br/>例如：你設計一個飛船遊戲，可以左右鍵控制它左右移動，但當按下右鍵飛船卻向左移動。

讓我們來深入了解這三種錯誤，在以後面對到同樣錯誤時就可以更快的找出問題。

### 語法錯誤
目前為止我們已經學了許多語法，你應該會發現它們有非常多相似的地方：
* 如果條件 `if () {}`
* 如果否則條件 `if () {} else {}`
* 迴圈 `while () {}`
* 迴圈 `for () {}`
* 函式 `function () {}`
* 陣列 `[]`
* 物件 `{}`

程式語法經常使用到小、中、大括號的符號來表達，而且通常都會是**成對**如果少了一個就會造成語法錯誤。<br/>
:::caution
程式中的括號幾乎都是成雙成對！
:::

底下的程式會比較變數 `a` 和 `b` 裡面的數值誰比較大並將結果印出來，
但是執行時卻出現語法錯誤，試著修正它吧：
<Playground javascript={`
let a = 10;
let b = 20;
if (a > b) {
console.log('a 比較大');
} else {
if (b > a) {
console.log('b 比較大');
} else {
console.log('一樣大');
}`} />

程式之所以會出錯，是因為少加了一個右大括號 `}` 在程式的最後，<br/>
程式中一對大括號 `{}` 有範圍的意思，被大括號包住的程式會做「縮排」的排版動作，讓程式能更輕鬆快速的閱讀。

同樣的程式如果有進行良好的**縮排排版**，可以更好的避免錯誤，以下有隨時在排版的程式，很明顯的就能看出少加括號的地方。
<Playground javascript={`
let a = 10;
let b = 20;
if (a > b) {
  console.log('a 比較大');
} else {
  if (b > a) {
    console.log('b 比較大');
  } else {
    console.log('一樣大');
}`} />

:::info 小技巧
保持良好的排版習慣，除了幫助自己和別人容易閱讀，也可以讓我們快速的發現這些錯誤！
:::

### 執行錯誤
如果程式沒有語法錯誤，電腦可以正確解讀並執行，但在執行的過程中卻出現了錯誤。

執行以下程式後會出現錯誤，試著找出問題並修正！
<Playground javascript={`
let a = 10;
let b = 20;\n
if (a > c) {
  console.log('a 比較大');
} else {
  console.log('b 比較大');
}`} />

這個程式試著比較兩個變數 `a` 和 `b` 的大小，並將結果顯示出來。<br/>
語法並沒有任何的錯誤，電腦每一行都可以看懂，當電腦把每一行程式都閱讀完後就會開始去執行，<br/>
但當它執行到比較大小的該行程式時，主控台出現了「c is not defined」錯誤並停了下來，<br/>
它試著去必較變數 `a` 和 `c`，但是變數 c 卻不存在，這表示我們打錯了變數名稱。

除了變數名稱打錯外，函式名稱打錯也是屬於執行錯誤的一種：
<Playground javascript={`
let rand = math.random();
console.log(rand);
`}/>

眼尖的你們應該就會發現，產生隨機數的屬於 `Math` 的方法，但是我們把 M 的大小寫打錯導致程式錯誤。

:::info 小技巧
當主控台出現「xx is not defined」錯誤訊息時，表示電腦去讀取 xx 時卻找不到，通常是變數、函式名稱拼錯。
:::

### 邏輯錯誤
程式沒有語法錯誤且執行過程有沒有出現錯誤訊息，但是結果卻和預期的不一樣，這就屬於邏輯錯誤。<br/>
因為邏輯錯誤沒有明確的錯誤訊息，所以通常會比較難解決，需要透過測試和推理來找出問題！

以下是數學加法的程式，但是執行時結果卻和預期不一樣，而且執行的過程中並沒有任何的錯誤訊息出現。<br/>
試著修正程式讓它可以正確計算結果：

<Playground javascript={`
let a = prompt('輸入 a 數值');
let b = prompt('輸入 b 數值');
console.log(a + b);
`}/>

執行程式我們發現輸入的兩個數值並不會做加法計算，如果仔細觀察會發現程式其實是把兩個數值文字串接起來。<br/>
所以我們可以猜測 `a` 和 `b` 兩個變數裡的資料型態是數值而不是字串。<br/>
原因是 `prompt` 函式取得輸入時就是字串型態，如果要做數學計算要透過 `Number` 函式將資料轉換成數值才行。

<Quiz
  description={`主控台出現錯誤訊息「apple is not defined」表示？`}
  options={[
    '發生語法錯誤，可能是程式語法的括號少了一個',
    'apple 變數不存在，可能是變數名稱拼錯',
  ]}
  answer={1}
/>

<!---
## 除錯技巧
不要對程式錯誤感到畏懼，因為就算有錯誤電腦也不會起火燒掉。<br/>
事實上再怎麼資深的工程師，再面對僅僅數十行的簡單程式，也是會犯錯！<br/>
只是這些工程師在**排除錯誤上必較有經驗**，我們接下來就要來學幾招工程師也很常用的排錯技巧！

### 主控台印出法
面對數百數千甚至數萬行程式，工程師是不可能一氣呵成寫完。<br/>
他們一定是每寫幾行程式，一個功能或是一部份的修正，就會試著執行看看目前完成的程式是否正確。<br/>
將一個問題拆解成數個問題，逐一完成並測試，最後再組合起來。

在主控台印出結果是很常見的測試手法。

```javascript
function countdown (times) {
  for (let i = 0; i < 10; i++) {
    console.log(i);
  }
}
```
### 註解法
```javascript
let a = prompt('請輸入數值 a');
let b = prompt('請輸入數值 b');

if (a = b) {
  console.log('a 和 b 一樣')
}
```

### 超級註解法


## 如何減少犯錯
1. 常見的語法錯誤通常是括號少打，如果有保持良好的程式排版，這種錯誤是很容易一眼看出來的，
所以程式縮排不只是幫助自己或他人更好去閱讀程式，同時也可以減少自己犯錯的機會。
-->